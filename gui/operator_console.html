<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>CHIMERA OPERATOR</title>
<style>
body { background:#0b0e14; color:#d0d0d0; font-family:monospace; }
table { border-collapse:collapse; width:100%; margin-bottom:20px; }
th, td { border:1px solid #333; padding:6px; text-align:center; }
th { background:#111; }
.dead { color:#aa3333; }
.live { color:#33aa33; }
</style>
</head>
<body>
<h2>CHIMERA â€” LIVE TELEMETRY</h2>

<h3>Engines</h3>
<table id="engines">
<tr>
<th>ENGINE</th><th>5M bps</th><th>DD</th><th>TRADES</th>
<th>FEES</th><th>ALLOC</th><th>LEV</th><th>STATUS</th>
</tr>
</table>

<h3>Recent Trades</h3>
<table id="trades">
<tr>
<th>ENGINE</th><th>SYMBOL</th><th>SIDE</th><th>BPS</th><th>LAT(ms)</th><th>LEV</th>
</tr>
</table>

<script>
const API = location.origin;

function refresh() {
    fetch(API)
    .then(r => r.json())
    .then(data => {
        const eTable = document.getElementById("engines");
        eTable.innerHTML = "<tr><th>ENGINE</th><th>5M bps</th><th>DD</th><th>TRADES</th><th>FEES</th><th>ALLOC</th><th>LEV</th><th>STATUS</th></tr>";
        data.engines.forEach(e => {
            const row = document.createElement("tr");
            row.className = e.status === "DEAD" ? "dead" : "live";
            row.innerHTML =
                "<td>"+e.name+"</td>" +
                "<td>"+e.net_bps.toFixed(2)+"</td>" +
                "<td>"+e.dd_bps.toFixed(2)+"</td>" +
                "<td>"+e.trades+"</td>" +
                "<td>"+e.fees.toFixed(2)+"</td>" +
                "<td>"+(e.alloc*100).toFixed(1)+"%</td>" +
                "<td>"+e.leverage.toFixed(1)+"x</td>" +
                "<td>"+e.status+"</td>";
            eTable.appendChild(row);
        });

        const tTable = document.getElementById("trades");
        tTable.innerHTML = "<tr><th>ENGINE</th><th>SYMBOL</th><th>SIDE</th><th>BPS</th><th>LAT(ms)</th><th>LEV</th></tr>";
        data.trades.slice(-20).reverse().forEach(t => {
            const row = document.createElement("tr");
            row.innerHTML =
                "<td>"+t.engine+"</td>" +
                "<td>"+t.symbol+"</td>" +
                "<td>"+t.side+"</td>" +
                "<td>"+t.bps.toFixed(2)+"</td>" +
                "<td>"+t.latency_ms.toFixed(1)+"</td>" +
                "<td>"+t.lev.toFixed(1)+"x</td>";
            tTable.appendChild(row);
        });
    });
}

setInterval(refresh, 1000);
</script>
</body>
</html>
