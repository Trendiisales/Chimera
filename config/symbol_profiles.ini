# ═══════════════════════════════════════════════════════════════════════════════
# CHIMERA v4.5.0 - Symbol Trading Profiles
# ═══════════════════════════════════════════════════════════════════════════════
#
# v4.5.0 ENGINE OWNERSHIP (NEW):
#   Engine ownership is now HARD-ENFORCED at execution boundary.
#   Each engine has its own allowed symbol list - see EngineOwnership.hpp
#   
#   - BINANCE ENGINE: All crypto (BTCUSDT, ETHUSDT, etc.)
#   - CFD ENGINE: All CFD EXCEPT NAS100 during income test
#   - INCOME ENGINE: NAS100 ONLY (hardcoded, cannot be changed)
#
#   ⚠️ WARNING: This config file is READ but does NOT override engine ownership.
#              Engine ownership is enforced in EngineOwnership.hpp
#
# EDGE QUALITY RANKING (v4.6.0):
#   TIER 1 (CORE): BTCUSDT, ETHUSDT, SOLUSDT - Primary money engines (crypto)
#   TIER 2 (ACTIVE CFD): 
#     - NAS100 (Income 03:00-05:00 NY, CFD outside)
#     - XAUUSD (defensive, post-sweep only)
#     - US30 (speed-optimised NY only)
#     - SPX500 (momentum-only NY only)
#   TIER 3 (SENSOR): XAGUSD, EURUSD, USDJPY - Limited capital
#   TIER 4 (DISABLED): GBPUSD, AUDUSD, USDCAD, USDCHF - No scaling
#
# RULE: 90% of profits come from 2-4 instruments. More symbols ≠ more edge.
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# GLOBAL SETTINGS
# ─────────────────────────────────────────────────────────────────────────────
[GLOBAL]
shadow_mode = true
paper_mode = true
live_mode = false

daily_loss_limit_usd = -500
max_drawdown_pct = 2.0
max_total_risk_pct = 0.5

min_shadow_trades = 100
capital_ramp_days = 7

# ═══════════════════════════════════════════════════════════════════════════════
# TIER 1: CORE EDGE - Trade These First
# ═══════════════════════════════════════════════════════════════════════════════

[BTCUSDT]
enabled = true
live_enabled = true
tier = 1
mode = HYBRID
session = ALL

base_size_usd = 25
max_position = 1

min_spread_bps = 0.4
max_spread_bps = 2.0

entry_confidence_min = 0.75
exit_confidence_min = 0.55

max_hold_ms = 2200
min_hold_ms = 120

take_profit_bps = 1.2
stop_loss_bps = 1.8

expectancy_min_bps = 0.4
expectancy_slope_min = 0.002

maker_timeout_ms = 180
taker_slippage_cap_bps = 0.8

latency_guard_us = 900
queue_position_max = 6

# ─────────────────────────────────────────────────────────────────────────────
[ETHUSDT]
enabled = true
live_enabled = true
tier = 1
mode = HYBRID
session = ALL

base_size_usd = 20
max_position = 1

min_spread_bps = 0.5
max_spread_bps = 2.5

entry_confidence_min = 0.78
exit_confidence_min = 0.58

max_hold_ms = 2000
min_hold_ms = 120

take_profit_bps = 1.4
stop_loss_bps = 2.0

expectancy_min_bps = 0.45
expectancy_slope_min = 0.0025

maker_timeout_ms = 160
taker_slippage_cap_bps = 1.0

latency_guard_us = 900
queue_position_max = 5

# ─────────────────────────────────────────────────────────────────────────────
[SOLUSDT]
enabled = true
live_enabled = true
tier = 1
mode = TAKER_ONLY
session = ALL

base_size_usd = 15
max_position = 1

min_spread_bps = 0.8
max_spread_bps = 3.0

entry_confidence_min = 0.82
exit_confidence_min = 0.60

max_hold_ms = 1600
min_hold_ms = 100

take_profit_bps = 1.8
stop_loss_bps = 2.5

expectancy_min_bps = 0.6
expectancy_slope_min = 0.003

taker_slippage_cap_bps = 1.2

latency_guard_us = 800

# ═══════════════════════════════════════════════════════════════════════════════
# TIER 2: CONDITIONAL - Session Filtered Only
# ═══════════════════════════════════════════════════════════════════════════════

[XAUUSD]
enabled = true
live_enabled = true
tier = 2
mode = TAKER_ONLY
session = LONDON_NY_ONLY

# ⚠️ DISABLE during: CPI, FOMC, NFP

base_size_lots = 0.01
max_position = 1

min_spread_points = 8
max_spread_points = 25

entry_confidence_min = 0.80
exit_confidence_min = 0.60

max_hold_ms = 3000
min_hold_ms = 200

take_profit_points = 35
stop_loss_points = 55

expectancy_min_bps = 0.7
expectancy_slope_min = 0.003

taker_slippage_cap_bps = 1.5

latency_guard_us = 1200

# ─────────────────────────────────────────────────────────────────────────────
[NAS100]
# ⚠️ v4.5.0: OWNED BY INCOME ENGINE
# This symbol is traded ONLY by IncomeEngine (ML-filtered behavior-based).
# CFD engine will be BLOCKED from trading this symbol.
enabled = true
live_enabled = true
tier = 2
mode = TAKER_ONLY
session = NY_OPEN_ONLY
engine_owner = INCOME  # v4.5.0: Engine-level ownership

base_size_lots = 0.01
max_position = 1

min_spread_points = 5
max_spread_points = 20

entry_confidence_min = 0.82
exit_confidence_min = 0.62

max_hold_ms = 1800
min_hold_ms = 150

take_profit_points = 25
stop_loss_points = 40

expectancy_min_bps = 0.6
expectancy_slope_min = 0.003

taker_slippage_cap_bps = 1.8

latency_guard_us = 1100

# ─────────────────────────────────────────────────────────────────────────────
# v4.6.0: SPX500 moved to speed-optimised section with US30 (see below)

# ═══════════════════════════════════════════════════════════════════════════════
# TIER 3: SENSOR - Limited Capital / Regime Sensing
# ═══════════════════════════════════════════════════════════════════════════════

[XAGUSD]
enabled = true
live_enabled = false
tier = 3
mode = TAKER_ONLY
session = LONDON_NY_ONLY

base_size_lots = 0.005
max_position = 1

min_spread_points = 10
max_spread_points = 30

entry_confidence_min = 0.85
exit_confidence_min = 0.65

max_hold_ms = 2500
min_hold_ms = 200

take_profit_points = 40
stop_loss_points = 60

expectancy_min_bps = 0.8
expectancy_slope_min = 0.004

taker_slippage_cap_bps = 2.0

latency_guard_us = 1500

# ─────────────────────────────────────────────────────────────────────────────
[EURUSD]
enabled = true
live_enabled = false
tier = 3
mode = HYBRID
session = LONDON_NY_ONLY

base_size_lots = 0.01
max_position = 1

# Very tight spread - efficient market
min_spread_pips = 0.1
max_spread_pips = 1.5

entry_confidence_min = 0.88
exit_confidence_min = 0.68

max_hold_ms = 2500
min_hold_ms = 150

take_profit_pips = 0.8
stop_loss_pips = 1.5

expectancy_min_bps = 0.3
expectancy_slope_min = 0.002

maker_timeout_ms = 200
taker_slippage_cap_bps = 0.5

latency_guard_us = 1000
queue_position_max = 4

# ─────────────────────────────────────────────────────────────────────────────
[USDJPY]
enabled = true
live_enabled = false
tier = 3
mode = TAKER_ONLY
session = ALL

base_size_lots = 0.01
max_position = 1

min_spread_pips = 0.3
max_spread_pips = 2.0

entry_confidence_min = 0.85
exit_confidence_min = 0.65

max_hold_ms = 2200
min_hold_ms = 150

take_profit_pips = 1.0
stop_loss_pips = 1.8

expectancy_min_bps = 0.4
expectancy_slope_min = 0.003

taker_slippage_cap_bps = 1.0

latency_guard_us = 1000

# ═══════════════════════════════════════════════════════════════════════════════
# TIER 4: DISABLED - Sensor Only, No Trading
# ═══════════════════════════════════════════════════════════════════════════════

# v4.6.0: US30 MOVED TO TIER 2 (see below)
# Speed-optimised for NY session, CFDEngine only

[GBPUSD]
enabled = true
live_enabled = false
tier = 4
# Random volatility, news-driven, poor microstructure

[AUDUSD]
enabled = true
live_enabled = false
tier = 4
# Low volatility, spread eats edge

[AUDNZD]
enabled = false
live_enabled = false
tier = 4
# Extremely wide relative spread, slow movement

[USDCAD]
enabled = true
live_enabled = false
tier = 4
# Choppy, oil-correlated randomness

[USDCHF]
enabled = true
live_enabled = false
tier = 4
# Artificial stability, sudden broker jumps

# ═══════════════════════════════════════════════════════════════════════════════
# v4.6.0: TIER 2 SPEED-OPTIMISED INDEX CFDs
# ═══════════════════════════════════════════════════════════════════════════════

# US30 (DOW JONES) - ACTIVE INDEX (Tier 2)
# Strong recommendation - clean impulse moves, fake-outs resolve quickly
# Speed saves scratches when it snaps back
[US30]
enabled = true
live_enabled = true
tier = 2
mode = TAKER_ONLY
session = NY_OPEN_ONLY
engine_owner = CFD

# v4.6.0: Speed-optimised thresholds (see SpeedOptimizedThresholds.hpp)
# Spread: 0.90 bps allow, 1.20 bps block
# Latency: 3.8ms allow, 6.0ms block
# Burst: 1.15 min strength, 260ms max age
# Time stop: 350ms
# Size: 70% of NAS

base_size_lots = 0.01
max_position = 1

min_spread_bps = 0.5
max_spread_bps = 1.20

entry_confidence_min = 0.80
exit_confidence_min = 0.60

max_hold_ms = 4000
min_hold_ms = 150

take_profit_points = 30
stop_loss_points = 50

expectancy_min_bps = 0.6
expectancy_slope_min = 0.003

taker_slippage_cap_bps = 2.0

latency_guard_us = 3800   # 3.8ms
time_stop_ms = 350

# ─────────────────────────────────────────────────────────────────────────────
# SPX500 - STABILISER INDEX (Tier 2)
# Cleaner than NAS but slower - speed helps entries, not exits
# MOMENTUM ONLY - no range fades
[SPX500]
enabled = true
live_enabled = true
tier = 2
mode = TAKER_ONLY
session = NY_OPEN_ONLY
engine_owner = CFD

# v4.6.0: Speed-optimised thresholds
# Spread: 0.60 bps allow, 0.90 bps block
# Latency: 3.5ms allow, 5.0ms block
# Burst: 1.25 min strength, 240ms max age
# Time stop: 300ms
# Size: 60% of NAS

base_size_lots = 0.01
max_position = 1

min_spread_bps = 0.3
max_spread_bps = 0.90

entry_confidence_min = 0.82
exit_confidence_min = 0.62

max_hold_ms = 5000
min_hold_ms = 150

take_profit_points = 22
stop_loss_points = 38

expectancy_min_bps = 0.55
expectancy_slope_min = 0.003

taker_slippage_cap_bps = 1.8

latency_guard_us = 3500   # 3.5ms
time_stop_ms = 300
momentum_only = true

# ═══════════════════════════════════════════════════════════════════════════════
# DEPLOYMENT PHASES
# ═══════════════════════════════════════════════════════════════════════════════
#
# PHASE 1: Shadow (All 15 enabled)
#   - Full diagnostics
#   - Collect >= 1,000 trades per symbol
#   - Size ignored
#
# PHASE 2: Live Crypto (After expectancy proven)
#   - BTCUSDT @ $25
#   - ETHUSDT @ $20
#   - SOLUSDT @ $15
#   - Run 7-14 days
#
# PHASE 3: Add CFDs (After crypto profitable)
#   - XAUUSD first
#   - NAS100 second
#   - Never enable more than one CFD at a time
#
# ═══════════════════════════════════════════════════════════════════════════════
